var dummyBackend=!1,ERROR_SETTINGSD_DISCONNECTED="Settings daemon is not connected",WS_REQUEST_TYPE={CONNMAN_MANAGER:"connman::manager",CONNMAN_TECHNOLOGY:"connman::technology",CONNMAN_SERVICE:"connman::service",BLUETOOTH:"bluetooth",DISPLAY:"display",SOUND:"sound",DATETIME:"clock",LOCALE:"locale"},WS_EVENT_TYPE={CONNMAN:"connman",BLUETOOTH:"bluetooth",DISPLAY:"display",SOUND:"sound",DATETIME:"clock",LOCALE:"locale"},wsAPI=function(){function n(t,n,r,i){e.socketUrl=typeof t!="undefined"?t:e.socketUrl,e.socketProtocol=typeof n!="undefined"?n:e.socketProtocol,e.successCB=r,e.errorCB=i,"WebSocket"in window?(e.socketProtocol.length>0?e.socket=new WebSocket(e.socketUrl,e.socketProtocol):e.socket=new WebSocket(e),console.log("Connecting to websocket: "+e.socketUrl),e.socket.onopen=function(){e.connected=!0,console.log("websocket opened"),e.successCB()},e.socket.onclose=function(t,n,r){e.connected=!1,console.log("websocket closed - "+n);if(dummyBackend){e.connected=!0,e.successCB();return}e.errorCB(n)},e.socket.onerror=function(t){if(dummyBackend)return;t.data?e.errorCB("websocket error: "+t.data):e.errorCB("websocket error: unknown")},e.socket.onmessage=function(e){o(e.data)}):console.log("Websockets not supported")}function r(){if(this.connected)return;setTimeout(function(){n(e.socketUrl,e.socketProtocol,e.successCB,e.errorCB)},1e3)}function i(e,t,n){if(!this.connected){n!==undefined&&(n(ERROR_SETTINGSD_DISCONNECTED),r());return}var i=this.methodIdx;this.methodIdx=(this.methodIdx+1)%100,this.methodCalls[i]=new this.MethodCall(e.transactionid,e.name,t,n),this.methodCalls[i].start();var s=JSON.stringify(e);console.log("Sending json msg: "+s),dummyBackend?c(e):this.socket.send(s)}function s(e,t,n,r){var i=new this.EventObject(e,t,n,r);console.log("Firing "+e+" event id="+t+", name="+n+", value="+r),event_callbacks.fire(i)}function o(e){var t=this,n;try{console.log("Received json msg: "+e),n=JSON.parse(e)}catch(r){console.error("Garbage message: "+e);return}if(n===undefined||n.type===undefined)console.error("Badly formed message: "+e);else if(n.type==="event"&&n.value!==undefined)if(n.value.interface_name==="net.connman.Manager"||n.value.interface_name==="net.connman.Service"||n.value.interface_name==="net.connman.Technology"){if(n.value.signal_name===undefined||n.value.parameters===undefined){console.error("Badly formed event: "+e);return}if(n.value.signal_name==="ServiceChanged"&&n.value.parameters.length!==2){console.error("Badly formed event parameters: "+e);return}n.value.object_path==="/"||n.value.object_path.indexOf("/net/connman/technology/")>=0?s(WS_EVENT_TYPE.CONNMAN,n.value.object_path,n.value.signal_name,n.value.parameters):console.error("Unrecognized event object_path, skipping")}else console.error("Unrecognized event, skipping");else if(n.transactionid===undefined)console.error("Badly formed response: "+e);else{var i=this.methodCalls;for(var o=0;o<i.length;o++){var u=i[o];if(u&&!u.done&&u.transactionid===n.transactionid){u.finish(),n.result!=="succeeded"&&n.reason!==undefined&&u.errorCB!==undefined?u.errorCB(n.reason):u.successCB!==undefined&&(n.value!==undefined?u.successCB(n.value):u.successCB());return}}}}function u(){var e,t=[];for(e=0;e<8;e++){var n=Math.floor((Math.random()+1)*65536);t[e]=n.toString(16).substring(1)}var r=t[0]+t[1]+"-"+t[2]+"-"+t[3]+"-"+t[4]+"-"+t[5]+t[6]+t[7];return r}function a(e,t,n,r,s){var o={type:e,transactionid:u(),name:t,value:n};i(o,r,s)}function f(e){event_callbacks.add(e)}function l(e){event_callbacks.remove(e)}function c(e){if(dummyBackend){console.log("Sending to dummy server");var t=this.methodCalls,n=null;for(var r=0;r<t.length;r++){var i=t[r];if(i&&!i.done&&i.transactionid===e.transactionid){i.finish(),e.error!==undefined&&i.errorCB&&i.errorCB(e.error);if(e.value!==undefined&&i.successCB!==undefined)switch(e.type){case WS_REQUEST_TYPE.CONNMAN_MANAGER:case WS_REQUEST_TYPE.CONNMAN_TECHNOLOGY:if(e.name==="get_technologies"){var o=[[["/net/connman/technology/ethernet",{Name:"Wired",Type:"ethernet",Powered:!0,Connected:!0,Tethering:!1}],["/net/connman/technology/wifi",{Name:"WiFi",Type:"wifi",Powered:!1,Connected:!1,Tethering:!1}],["/net/connman/technology/bluetooth",{Name:"Bluetooth",Type:"bluetooth",Powered:!1,Connected:!1,Tethering:!1}]]];n=JSON.stringify(o),i.successCB(o);return}if(e.name==="enable"&&e.value[1]===!0){i.successCB(),s(WS_EVENT_TYPE.CONNMAN,e.value[0],"PropertyChanged",["Powered",!0]);return}if(e.name==="enable"&&e.value[1]===!1){i.successCB(),s(WS_EVENT_TYPE.CONNMAN,e.value[0],"PropertyChanged",["Powered",!1]);return}if(e.name==="get_services"||e.name==="scan"){var o=[[["/net/connman/service/ethernet_0010f32f5a70_cable",{Type:"ethernet",Security:[],State:"ready",AutoConnect:!0,Domains:["ftrdhcpuser.net"],"Domains.Configuration":[],Ethernet:{Address:"10:20:F3:2F:5E:23",Interface:"eno1",MTU:1500,Method:"auto"},Favorite:!0,IPv4:{Address:"192.168.1.20",Gateway:"192.168.1.1",Method:"dhcp",Netmask:"255.255.255.0"},"IPv4.Configuration":{Method:"dhcp"},IPv6:{},"IPv6.Configuration":{Method:"auto",Privacy:"disabled"},Immutable:!1,Name:"Wired",Nameservers:["192.168.1.1","184.11.12.13"],"Nameservers.Configuration":[],Provider:{},Proxy:{Method:"direct"},"Proxy.Configuration":{},Timeservers:["192.168.1.1","pool.ntp.org"],"Timeservers.Configuration":[]}],["/net/connman/service/wifi_c8f733acdf96_3558364737_managed_psk",{Type:"wifi",Security:["psk"],State:"ready",Strength:50,Favorite:!1,Immutable:!1,AutoConnect:!1,Name:"Access Point 1",BSSID:"11:5d:49:88:3d:20",MaxRate:54e6,Frequency:2417,EncryptionMode:"none",Ethernet:{Method:"auto",Interface:"wlp1s0",Address:"B2:D3:55:66:44:22",MTU:1500},IPv4:{Address:"192.168.1.20",Gateway:"192.168.1.1",Method:"dhcp",Netmask:"255.255.255.0"},"IPv4.Configuration":{Method:"dhcp"},IPv6:{},"IPv6.Configuration":{Method:"auto",Privacy:"disabled"},Nameservers:[],"Nameservers.Configuration":[],Timeservers:[],"Timeservers.Configuration":[],Domains:[],"Domains.Configuration":[],Proxy:{},"Proxy.Configuration":{},Provider:{}}],["/net/connman/service/wifi_c8f733acdf96_446f75636865626167_managed_psk",{Type:"wifi",Security:["psk"],State:"idle",Strength:50,Favorite:!1,Immutable:!1,AutoConnect:!1,Name:"Access Point 2",BSSID:"21:ef:30:b9:ad:86",MaxRate:54e6,Frequency:2417,EncryptionMode:"aes",Ethernet:{Method:"auto",Interface:"wlp1s0",Address:"E8:F2:33:AC:DF:96",MTU:1500},IPv4:{},"IPv4.Configuration":{Method:"dhcp"},IPv6:{},"IPv6.Configuration":{Method:"auto",Privacy:"disabled"},Nameservers:[],"Nameservers.Configuration":[],Timeservers:[],"Timeservers.Configuration":[],Domains:[],"Domains.Configuration":[],Proxy:{},"Proxy.Configuration":{},Provider:{}}],["/net/connman/service/wifi_c8f733acdf96_536563757265446f75636865626167_managed_psk",{Type:"wifi",Security:["psk"],State:"idle",Strength:50,Favorite:!1,Immutable:!1,AutoConnect:!1,Name:"Access Point 3",BSSID:"25:ad:44:b7:e3:66",MaxRate:54e6,Frequency:2417,EncryptionMode:"aes",Ethernet:{Method:"auto",Interface:"wlp1s0",Address:"A9:28:44:AD:FF:26",MTU:1500},IPv4:{},"IPv4.Configuration":{Method:"dhcp"},IPv6:{},"IPv6.Configuration":{Method:"auto",Privacy:"disabled"},Nameservers:[],"Nameservers.Configuration":[],Timeservers:[],"Timeservers.Configuration":[],Domains:[],"Domains.Configuration":[],Proxy:{},"Proxy.Configuration":{},Provider:{}}]]];n=JSON.stringify(o),setTimeout(function(){i.successCB(o)},2e3);return};case WS_REQUEST_TYPE.CONNMAN_SERVICE:if(e.name==="connect"){e.value[0]==="/net/connman/service/wifi_c8f733acdf96_3558364737_managed_psk"&&e.value[1].Passphrase!=="123"?i.errorCB("Invalid passphrase"):e.value[0]==="/net/connman/service/wifi_c8f733acdf96_446f75636865626167_managed_psk"&&e.value[1].Passphrase!=="123"?i.errorCB("Invalid passphrase"):(i.successCB(),setTimeout(function(){s(WS_EVENT_TYPE.CONNMAN,e.value[0],"PropertyChanged",["Connected",!0])},2e3));return}if(e.name==="disconnect"){i.successCB(),setTimeout(function(){s(WS_EVENT_TYPE.CONNMAN,e.value[0],"PropertyChanged",["Connected",!1])},2e3);return}i.errorCB&&i.errorCB("Unsupported request: "+e.name+", "+e.value);return;case WS_REQUEST_TYPE.DATETIME:if(e.name==="is_time_updates_auto"&&e.value!==undefined){i.successCB(!1);return}if(e.name==="is_timezone_updates_auto"&&e.value!==undefined){i.successCB(!1);return}if(e.name==="time"&&e.value!==undefined){i.successCB();return}if(e.name==="timezone"&&e.value!==undefined){i.successCB();return}if(e.name==="time_updates"&&e.value!==undefined){i.successCB();return}if(e.name==="timezone_updates"&&e.value!==undefined){i.successCB();return}i.errorCB&&i.errorCB("Unsupported request: "+e.name+", "+e.value);return;case WS_REQUEST_TYPE.DISPLAY:case WS_REQUEST_TYPE.SOUND:case WS_REQUEST_TYPE.LOCALE:i.errorCB&&i.errorCB("Request not implemented");return;default:i.errorCB&&i.errorCB("Invalid request type: "+e.type);return}return}}}}var e=this;this.connected=!1,this.event_callbacks=$.Callbacks(),this.socketUrl="ws://localhost:16000/",this.socketProtocol="http-only",this.timeouttime=15e3,this.methodIdx=0,this.methodCalls=[];for(var t=0;t<100;t++)this.methodCalls[t]=null;return this.MethodCall=function(t,n,r,i){var s=this;this.successCB=r,this.errorCB=i,this.transactionid=t,this.name=n,this.done=!1,this.start=function(){s.timeout=setTimeout(function(){s.errorCB!==undefined&&s.errorCB('"'+s.name+'" method timed out after '+e.timeouttime+" ms"),s.finish()},e.timeouttime)},this.finish=function(){s.timeout!==undefined&&clearTimeout(s.timeout),s.done=!0}},this.EventObject=function(e,t,n,r){var i=this;this.type=e,this.id=t,this.name=n,this.value=r},{connect:n,reconnect:r,sendRequest:a,subscribeEvents:f,unsubscribeEvents:l}}()