var Configuration=function(){"use strict";function e(){console.info("Starting up service Configuration")}return e.prototype=function(){},e.prototype._updateCallbacks={},e.prototype._settingsFileName="__intel_ivi.settings",e.prototype._settingsStorageName="downloads",e.prototype._values={version:.4,selectedTheme:"http://com.intel.tizen/blue",bluetooth:{devices:null,lastSync:null}},e.prototype.addUpdateListener=function(e){var t=Math.floor(Math.random()*1e6);return this._updateCallbacks[t]=e,t},e.prototype.removeUpdateListener=function(e){this._updateCallbacks[e]=undefined},e.prototype.get=function(e){return typeof this._values[e]=="object"?JSON.parse(JSON.stringify(this._values[e])):this._values[e]},e.prototype.set=function(e,t,n){this._values[e]=t,this.save(),(n===undefined||n)&&this._callListeners()},e.prototype._callListeners=function(){for(var e in this._updateCallbacks)if(this._updateCallbacks.hasOwnProperty(e))try{this._updateCallbacks[e]()}catch(t){console.log("Error occured during callback invocation",t)}},e.prototype.reload=function(e){var t=this;e=e||function(){},typeof tizen!="undefined"?tizen.filesystem.resolve(this._settingsStorageName,function(n){var r;try{r=n.resolve(t._settingsFileName)}catch(i){console.warn("Settings file doesn't exist, creating ...",i),r=n.createFile(t._settingsFileName)}r.readAsText(function(n){var r=null;if(n.length>0)try{r=JSON.parse(n)}catch(i){console.error("Error occured during parsing settings file",i),e(i)}if(!r||!r.version||r.version<t._values.version)r=jQuery.extend({},t._values),t.save();JSON.stringify(r)!==JSON.stringify(t._values)&&(console.log("Settings updated."),t._values=r,t._callListeners()),e()},function(t){console.error("Cannot read settings file",t),e(t)})},function(t){console.error("Error occured during opening Documents directory",t),e(t)},"rw"):(console.warn("Tizen API is not available, cannot read settings from persistent storage."),e())},e.prototype.save=function(){var e=this;typeof tizen!="undefined"?tizen.filesystem.resolve(this._settingsStorageName,function(t){var n;try{n=t.resolve(e._settingsFileName)}catch(r){console.warn("Settings file doesn't exist, creating ...",r),n=t.createFile(e._settingsFileName)}n.openStream("w",function(t){console.log("Writing new settings",e._values),t.write(JSON.stringify(e._values)),t.close()},function(e){console.error("Cannot read settings file",e)})},function(e){console.error("Error occured during opening Documents directory",e)},"rw"):console.warn("Tizen API is not available, cannot read settings from persistent storage.")},window.__configuration=undefined===window.__configuration?new e:window.__configuration,window.__configuration}()