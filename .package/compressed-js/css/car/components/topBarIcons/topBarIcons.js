function onError(e){"use strict";console.error(e),alert("An error occured while launching the application: "+e.message)}function getAppByID(e){"use strict";var t,n=0;for(t=0;t<topBarAplicationsModel.length;++t)if(e===topBarAplicationsModel[t].id)return topBarAplicationsModel[t];for(n=0;n<extraAppsModel.length;++n)if(e===extraAppsModel[n].id)return extraAppsModel[n];return null}function getAppByName(e){"use strict";for(var t=0;t<topBarAplicationsModel.length;++t)if(e.toString().trim().toLowerCase()===topBarAplicationsModel[t].appName.toString().trim().toLowerCase())return topBarAplicationsModel[t];for(var n=0;n<extraAppsModel.length;++n)if(e.toString().trim().toLowerCase()===extraAppsModel[n].appName.toString().trim().toLowerCase())return extraAppsModel[n];return null}function onLaunchSuccess(){"use strict";console.log("App launched succesfully..."),appToHide&&appToHide.hide()}function launchApplication(e){"use strict";if(e==="http://com.intel.tizen/settings"){typeof Settings=="undefined"?loadScript("./css/car/components/settings/js/settings.js",function(e,t){t==="ok"&&Settings.init()}):Settings.show();return}var t=getAppByID(e);t?t.installed&&!t.running?(appToHide=tizen.application.getCurrentApplication(),tizen.application.launch(t.id,onLaunchSuccess,onError)):t.running&&console.log("Application is running!"):(console.log("Application is not installed!"),alert("Application is not installed!"))}var topBarAplicationsModel=[],extraAppsModel=[],appToHide;(function(e){"use strict";var t={runningAppName:"",init:function(){t.initLaunchingAppsByVoiceRecognition(),t.runningAppName=typeof tizen.application.getCurrentApplication=="undefined"?"":tizen.application.getCurrentApplication().appInfo.id,this.empty(),this.addClass("topBarIcons"),typeof ThemeEngine!="undefined"?ThemeEngine.addStatusListener(function(e){t.renderApps()}):console.error("ThemeEngine API is not available."),t._getApps()},_getApps:function(){try{typeof tizen.application.getAppsInfo!="undefined"&&tizen.application.getAppsInfo(t.onAppInfoSuccess,function(e){window.setTimeout(function(){t._getApps()},1e3),onError(e)})}catch(e){console.error(e.message)}},appList:[],prevThemeColor:"",onAppInfoSuccess:function(e){try{var n,r=0,i=0,s=[],o={};for(r=0;r<e.length;r++){var u=e[r],a=u.name.substr(7);a=a.replace(/\./g,"").replace(/\ /g,"");if(u.name.indexOf("Modello")>=0){var f={id:u.id,appName:u.name,style:"background-image: url('icons/"+a+"_icon.png');",iconPath:u.iconPath,css:"app_"+u.id.replace(/\./g,"_").replace(/\ /g,"_"),installed:!0,running:t.runningAppName===u.id};u.name==="ModelloHomescreen"?o=f:u.name==="ModelloAMBSimulator"?extraAppsModel.push(f):s.length<7&&s.push(f)}}s.sort(function(e,t){return e.appName>t.appName?1:-1}),s.unshift(o);while(s.length<8)s.push({});s.push({id:"http://com.intel.tizen/settings",appName:"settings",css:"appIconNo7",installed:!0,lastIcon:!0});var l=s.length===topBarAplicationsModel.length;if(l)for(i=0;i<s.length;i++)l=s[i].id===topBarAplicationsModel[i].id?l:!1,l=s[i].appName===topBarAplicationsModel[i].appName?l:!1,l=s[i].css===topBarAplicationsModel[i].css?l:!1,l=s[i].iconPath===topBarAplicationsModel[i].iconPath?l:!1;l||(topBarAplicationsModel=s,n!==e.length&&loadScript("./css/car/components/jsViews/jsrender.js",function(e,n){n==="ok"&&loadScript("./css/car/components/jsViews/template.js",function(e,n){n==="ok"&&(t.renderApps(),topBarAplicationsModel=s)})}))}catch(c){console.error(c.message)}},renderApps:function(){e(".topBarIcons").empty(),template.compile(topBarAplicationsModel,"./css/car/components/topBarIcons/templates/topBarIconsDelegate.html",".topBarIcons",function(){var e=0;for(e=0;e<topBarAplicationsModel.length;++e)topBarAplicationsModel[e].running?changeCssBgImageColor("."+topBarAplicationsModel[e].css,ThemeKeyColorSelected):changeCssBgImageColor("."+topBarAplicationsModel[e].css,ThemeKeyColor)})},initLaunchingAppsByVoiceRecognition:function(){typeof Speech!="undefined"?Speech.addVoiceRecognitionListener({onapplicationlaunch:function(e){launchApplication(getAppByName(e).id)}}):console.warn("Speech API is not available.")}};e.fn.topBarIconsPlugin=function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery.boxCaptionPlugin")}})(jQuery)