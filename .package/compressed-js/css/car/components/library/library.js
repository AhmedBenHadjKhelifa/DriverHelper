var GRID_TAB=0,LIST_TAB=1,SEARCH_TAB=2,basePath="./css/car/components/library/templates/",LIBRARY_SUB_PANEL_DELEGATE_DEFAULT=basePath+"subpanelDelegate.html",LIBRARY_TOP_PANEL_DELEGATE_DEFAULT=basePath+"tabMenuItemDelegate.html";(function(e){"use strict";var t={thisObj:null,contentDelegate:null,menuItemDelegate:LIBRARY_TOP_PANEL_DELEGATE_DEFAULT,subpanelDelegate:LIBRARY_SUB_PANEL_DELEGATE_DEFAULT,sectionTitle:"",selectedLeftTabIndex:LIST_TAB,gridDisabled:!1,listDisabled:!1,searchDisabled:!1,selectedTopTabIndex:-1,alphabetVisible:!1,visible:!1,init:function(){this.empty();var n;n="<div class='libraryLeftPanel'>",n+="<div class='libraryLeftControl'>",n+="<div id='grid' class='gridIcon ",t.gridDisabled?n+="gridIconDisabled":t.selectedLeftTabIndex===GRID_TAB&&(n+="gridIconActive"),n+="' onclick=\"$('#"+this.attr("id")+"').library('clickOnGridViewBtn')\"></div>",n+="<div id='list' class='listIcon ",t.listDisabled?n+="listIconDisabled":t.selectedLeftTabIndex===LIST_TAB&&(n+="listIconActive"),n+="' onclick=\"$('#"+this.attr("id")+"').library('clickOnListViewBtn')\"></div>",n+="<div id='search' class='searchIcon ",t.listDisabled?n+="searchIconDisabled":t.selectedLeftTabIndex===SEARCH_TAB&&(n+="serachIconActive"),n+="' onclick=\"$('#"+this.attr("id")+"').library('clickOnSearchViewBtn')\"></div>",n+="</div>",n+="</div>",n+="<div id='libraryTopPanel' class='libraryTopPanel'>",n+="<div class='libraryTopPanelTitle'></div>",n+="<div class='closeLibraryButton' onClick='$(\"#"+this.attr("id")+'").library("hidePage")\'></div>',n+="<div id='libraryTabsID' class='libraryTabs'><div id='tabsWrapperID' class='tabsWrapper'></div></div>",n+="</div>",n+="<div class='libraryTabClear'></div>",n+="<div id='alphabetBookmarkList'></div>",n+="<div id='libraryTopSubPanel' class='libraryTopSubPanel bgColorDark'></div>",n+="<div id='libraryContent' class='libraryContent'>",n+="</div>",this.append(n),e(".libraryTopPanelTitle").boxCaptionPlugin("initSmall",t.sectionTitle),AlphabetBookmark.fill(),e("#libraryContent").show(),e("#libraryTopSubPanel").hide(),t.thisObj=this,t.updateContentHeight()},updateContentHeight:function(){var n=t.thisObj.height();e("#libraryTopPanel").is(":visible")&&(n-=e("#libraryTopPanel").outerHeight()),e("#libraryTopSubPanel").is(":visible")&&(n-=e("#libraryTopSubPanel").outerHeight()),e("#libraryContent").css({maxHeight:n+"px"})},showPage:function(){t.thisObj&&(t.thisObj.css("left","0px"),t.visible=!0)},hidePage:function(){t.thisObj&&(t.thisObj.css("left","720px"),t.visible=!1)},isVisible:function(){return t.visible},setSectionTitle:function(n){t.sectionTitle=n,e(".libraryTopPanelTitle").boxCaptionPlugin("initSmall",t.sectionTitle)},setContentDelegate:function(e){t.contentDelegate=e},contentTemplateCompile:function(e,n,r){t.clearContent(),t.changeContentClass(n),template.compile(e,t.contentDelegate,"#libraryContent",r)},changeContentClass:function(t){e("#libraryContent").removeClass(),e("#libraryContent").addClass("libraryContent "+t)},clearContent:function(){e("#libraryContent").empty()},setMenuItemDelegate:function(e){t.menuItemDelegate=e},tabMenuTemplateCompile:function(n,r){var i=0;for(i=0;i<n.Tabs.length;i++)n.Tabs[i].index=i,n.Tabs[i].selected&&(t.selectedTopTabIndex=n.Tabs[i].index),n.Tabs[i].action?n.Tabs[i].action=n.Tabs[i].action+"$('#"+this.attr("id")+"').library('libraryTabClick',"+i+");":n.Tabs[i].action="$('#"+this.attr("id")+"').library('libraryTabClick',"+i+");";t.selectedTopTabIndex===-1&&(t.selectedTopTabIndex=0),template.compile(n,t.menuItemDelegate,"#tabsWrapperID",function(){var t=e("#libraryTabsID").width()-e("#tabsWrapperID").width();e(".libraryTabInlineClear").css("width",t),r&&r()})},getSelectetTopTabIndex:function(){return t.selectedTopTabIndex},setTopTabIndex:function(n){t.selectedTopTabIndex=n,e(".libraryTab").removeClass("fontColorSelected libraryTabSelected");var r="#libraryTab"+n;e(r).toggleClass("fontColorSelected libraryTabSelected");var i="libraryTab"+n+"Selected";e("#libraryTopPanel").attr("class","libraryTopPanel "+i)},setSubpanelContentDelegate:function(e){t.subpanelDelegate=e},subpanelContentTemplateCompile:function(n,r){n.id=this.attr("id"),n.action||(n.action=function(){t.closeSubpanel()},n.actionName="BACK"),LIBRARY_SUB_PANEL_DELEGATE_DEFAULT===t.subpanelDelegate?template.compile(n,t.subpanelDelegate,"#libraryTopSubPanel",function(){!n.textTitle||e("#libraryTopSubPanelTitle").boxCaptionPlugin("initSmall",n.textTitle),!n.action||e("#libraryCloseSubPanelButton").click(function(){n.action()}),t.showSubpanel(),!r||r()}):template.compile(n,t.subpanelDelegate,"#libraryTopSubPanel",function(){t.showSubpanel(),!r||r()})},getSelectetLeftTabIndex:function(){return t.selectedLeftTabIndex},setLeftTabIndex:function(n){t.selectedLeftTabIndex=n,e(".libraryLeftControl").children("*").removeClass("listIconActive searchIconActive gridIconActive");switch(n){case 0:e(".libraryLeftControl #grid").addClass("gridIconActive");break;case 1:e(".libraryLeftControl #list").addClass("listIconActive");break;case 2:e(".libraryLeftControl #search").addClass("searchIconActive")}},clickOnGridViewBtn:function(){t.gridDisabled||(t.selectedLeftTabIndex=GRID_TAB,e(".libraryLeftControl #list").removeClass("listIconActive"),e(".libraryLeftControl #search").removeClass("searchIconActive"),e(".libraryLeftControl #grid").addClass("gridIconActive"),t.thisObj.trigger("eventClick_GridViewBtn"))},setGridBtnDisabled:function(n){t.gridDisabled=n,n?e(".libraryLeftControl #grid").removeClass("gridIconActive").addClass("gridIconDisabled"):e(".libraryLeftControl #grid").removeClass("gridIconDisabled")},clickOnListViewBtn:function(){t.listDisabled||(t.selectedLeftTabIndex=LIST_TAB,e(".libraryLeftControl #grid").removeClass("gridIconActive"),e(".libraryLeftControl #search").removeClass("searchIconActive"),e(".libraryLeftControl #list").addClass("listIconActive"),t.thisObj.trigger("eventClick_ListViewBtn"))},setListBtnDisabled:function(n){t.listDisabled=n,n?e(".libraryLeftControl #list").removeClass("listIconActive").addClass("listIconDisabled"):e(".libraryLeftControl #list").removeClass("listIconDisabled")},clickOnSearchViewBtn:function(){t.searchDisabled||(e(".libraryLeftControl #grid").removeClass("gridIconActive"),e(".libraryLeftControl #list").removeClass("listIconActive"),e(".libraryLeftControl #search").addClass("searchIconActive"),t.thisObj.trigger("eventClick_SearchViewBtn"))},setSearchBtnDisabled:function(n){t.searchDisabled=n,n?e(".libraryLeftControl #search").removeClass("searchIconActive").addClass("searchIconDisabled"):e(".libraryLeftControl #search").removeClass("searchIconDisabled")},showSubpanel:function(n){e("#libraryTopSubPanel").is(":hidden")&&(e("#libraryTopSubPanel").show("fast",function(){t.updateContentHeight(),n&&n()}),t.alphabetVisible?e("#alphabetBookmarkList").css("top","175px"):t.hideAlphabet(),t.thisObj.trigger("eventClick_showSubpanel"))},closeSubpanel:function(n){e("#libraryTopSubPanel").is(":visible")&&(e("#libraryTopSubPanel").hide("fast",function(){t.updateContentHeight(),n&&n()}),t.alphabetVisible&&t.showAlphabet(),e("#alphabetBookmarkList").css("top","115px"),t.thisObj.trigger("eventClick_closeSubpanel"))},libraryTabClick:function(e){t.setTopTabIndex(e),t.thisObj.trigger("eventClick_menuItemBtn",{Index:e})},setAlphabetVisible:function(e){t.alphabetVisible=e},hideAlphabet:function(){e("#alphabetBookmarkList").hide(),e("#libraryContent").css("margin-right","15px")},showAlphabet:function(){e("#alphabetBookmarkList").show(),e("#libraryContent").css("margin-right","50px")}};e.fn.library=function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery.library")}})(jQuery)